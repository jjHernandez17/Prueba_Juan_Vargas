@model IEnumerable<JuanJoseVargas.Models.Patient>

@{
    ViewData["Title"] = "Gestión de Pacientes";
    var message = TempData["message"];
}

<div class="container py-4">
    <!-- Encabezado con título y botón -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="fw-bold text-primary">Lista de Pacientes</h2>
        <a  asp-controller="Patient" asp-action="Create" class="btn btn-primary">
            Agregar Paciente
        </a>
    </div>

    <!-- Mensaje de confirmación -->
    @if (message != null)
    {
        <div id="tempMessage" class="alert alert-success">
            @message
        </div> 
        <script>
            
            setTimeout(function() {
                var messageDiv = document.getElementById('tempMessage');
                messageDiv.style.display = 'none'; 
            }, 3000); 
        </script>
    }

    <!-- Tabla -->
    <div class="table-responsive">
        <table class="table table-hover align-middle shadow-sm">
            <thead class="table-primary">
                <tr>
                    <th>Nombre</th>
                    <th>Documento</th>
                    <th>Edad</th>
                    <th>Teléfono</th>
                    <th>Correo</th>
                    <th class="text-center">Acciones</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Any())
                {
                    @foreach (var p in Model)
                    {
                        <tr>
                            <td>@p.FullName</td>
                            <td>@p.Document</td>
                            <td>@p.Age</td>
                            <td>@p.Phone</td>
                            <td>@p.Email</td>
                            <td class="text-center">
                                <div class="btn-group" role="group">
                                    <a asp-controller="Patient" asp-action="Edit" asp-route-id="@p.Id" class="btn btn-sm btn-outline-primary">Editar</a>
                                    <a asp-controller="Patient" asp-action="Delete" asp-route-id="@p.Id" class="btn btn-sm btn-outline-danger"
                                       onclick="return confirm('⚠️ ¿Seguro que quieres eliminar a @p.FullName?');">
                                        Eliminar
                                    </a>
                                </div>
                            </td>
                        </tr>
                    }
                }
             
            </tbody>
        </table>
    </div>
</div>

<style>
    /* Tema azul */
    .text-primary {
        color: #0d6efd !important;
    }
    .btn-primary {
        background-color: #0d6efd;
        border: none;
    }
    .btn-primary:hover {
        background-color: #0b5ed7;
    }
    .table-primary {
        background-color: #cfe2ff !important;
    }
</style>
